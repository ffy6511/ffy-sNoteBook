---
{"dg-publish":true,"permalink":"/obsidian///xlab//use-swr/","created":"2024-08-02T22:50:21.834+08:00","updated":"2024-09-08T15:25:05.468+08:00"}
---

`useSWR` æ˜¯ä¸€ä¸ªåŸºäº React çš„æ•°æ®è¯·æ±‚åº“

1. **è‡ªåŠ¨æ•°æ®ç¼“å­˜å’Œé‡æ–°éªŒè¯**ï¼š
    
    - SWR ä¼šå°†è¯·æ±‚çš„æ•°æ®ç¼“å­˜èµ·æ¥ï¼Œå½“ç»„ä»¶é‡æ–°æ¸²æŸ“æ—¶ï¼Œå®ƒä¼šå…ˆè¿”å›ç¼“å­˜ä¸­çš„æ•°æ®ï¼ŒåŒæ—¶åœ¨åå°é‡æ–°è¯·æ±‚æ•°æ®ï¼Œå¹¶åœ¨æ•°æ®æ›´æ–°åå†æ¬¡æ¸²æŸ“ç»„ä»¶ã€‚
2. **å‡å°‘ç½‘ç»œè¯·æ±‚**ï¼š
    
    - é€šè¿‡ç¼“å­˜æœºåˆ¶ï¼ŒSWR å¯ä»¥å‡å°‘é‡å¤çš„ç½‘ç»œè¯·æ±‚ï¼Œæé«˜æ€§èƒ½ã€‚
3. **ç®€åŒ–æ•°æ®è¯·æ±‚é€»è¾‘**ï¼š
    
    - ä½¿ç”¨ SWR å¯ä»¥è®©æ•°æ®è¯·æ±‚é€»è¾‘æ›´ç®€å•ï¼Œé¿å…æ‰‹åŠ¨å¤„ç†å„ç§çŠ¶æ€ï¼ˆåŠ è½½ä¸­ã€é”™è¯¯ã€æ•°æ®æ›´æ–°ç­‰ï¼‰ã€‚
4. **è‡ªåŠ¨å¤„ç†é”™è¯¯é‡è¯•**ï¼š
    
    - SWR å†…ç½®äº†é”™è¯¯é‡è¯•æœºåˆ¶ï¼Œå½“è¯·æ±‚å¤±è´¥æ—¶ï¼Œå®ƒä¼šè‡ªåŠ¨é‡è¯•è¯·æ±‚ã€‚
5. **æ”¯æŒæœ¬åœ°æ•°æ®å˜æ›´ï¼ˆä¹è§‚æ›´æ–°ï¼‰**ï¼š
    
    - SWR æ”¯æŒåœ¨æœ¬åœ°ç›´æ¥ä¿®æ”¹ç¼“å­˜ä¸­çš„æ•°æ®ï¼Œå¯ä»¥å®ç°ä¹è§‚æ›´æ–°çš„æ•ˆæœã€‚
6. **æ”¯æŒåˆ†é¡µå’Œæ»šåŠ¨åŠ è½½**ï¼š
    
    - SWR æä¾›äº†å¯¹åˆ†é¡µå’Œæ— é™æ»šåŠ¨åŠ è½½çš„æ”¯æŒã€‚
7. **ç®€å•çš„ API**ï¼š
    
    - `useSWR` æä¾›äº†ä¸€ä¸ªç®€å•çš„ APIï¼Œåªéœ€è¦æä¾›ä¸€ä¸ª key å’Œ fetcher å‡½æ•°å³å¯ã€‚

---
ğŸŒ°:
```js
import useSWR from 'swr'

const fetcher = url => fetch(url).then(res => res.json())

function Profile() {
  const { data, error } = useSWR('/api/user', fetcher)

  if (error) return <div>Failed to load</div>
  if (!data) return <div>Loading...</div>

  return <div>Hello {data.name}!</div>
}

```
åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼š
- `useSWR` æ¥å—ä¸¤ä¸ªå‚æ•°ï¼šæ•°æ®çš„ keyï¼ˆè¿™é‡Œæ˜¯ API çš„ URLï¼‰å’Œä¸€ä¸ª fetcher å‡½æ•°ï¼ˆè´Ÿè´£è·å–æ•°æ®ï¼‰ã€‚
- è¿”å›çš„æ•°æ®å¯¹è±¡åŒ…å« `data` å’Œ `error` ä¸¤ä¸ªå±æ€§ï¼Œç”¨äºåˆ†åˆ«å¤„ç†æ•°æ®å’Œé”™è¯¯çŠ¶æ€ã€‚
- ç»„ä»¶ä¼šé¦–å…ˆæ˜¾ç¤ºç¼“å­˜ä¸­çš„æ•°æ®ï¼ˆå¦‚æœæœ‰ï¼‰ï¼Œç„¶ååœ¨åå°é‡æ–°è·å–æ•°æ®å¹¶æ›´æ–°ã€‚