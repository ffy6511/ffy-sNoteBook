---
{"dg-publish":true,"permalink":"/obsidian///xlab//ts/","created":"2024-09-06T15:09:13.547+08:00","updated":"2024-09-08T15:25:05.475+08:00"}
---

# 思考题
❓在我们之前的项目中，前后端服务器各是如何启动的？在一个 Next.js 项目中，是如何做到统一启动前端和后端的服务器的？
	①前端和后端都通过各自的命令启动，比如Next.js使用`next dev`命令；通过`npm run start`启动后端服务器
	②在next.js的全栈框架下，运行`npm run dev`时会同时启动前端页面渲染和API路由，前端向后端发送请求时只需要向/api/...发送请求


❓在我们之前的项目中，如果后端发生了错误，前端是如何得知的？前端如何分辨错误类型？在 trpc 中，后端是如何抛出错误的？这个错误是以什么方式传递给前端的？（可以尝试用浏览器抓包看看）前端如何得知错误的发生并判断错误类型？
    ①前端通过后端返回的错误码及其类型来判断具体的错误，比如：
	    404 未找到； 500 服务器内部错误； 401 未授权
	另外，后端返回的JSON格式的响应也可以包含详细的错误信息
	②在trpc中，用`throw new TRPCError({...})`发出报错，并被错误处理中间件捕获
		当trpc抛出错误时，将错误信息通过响应体前端，包含code,message等类型
		前端则通过响应体信息来分析错误类型


❓选做题：相比 HTTP，rpc 是如何实现后端调用的？在 trpc 中，这一过程具体是怎么实现的？
	①HTTP（Hypertext Transfer Protocol）：是一种面向资源的通信协议，客户端向服务器发送请求，服务器返回资源。HTTP 请求是无状态的，每个请求都是独立的。 
	RPC（Remote Procedure Call）： 是一种面向过程的通信协议，客户端通过调用远程服务器上的方法（类似于本地函数调用），并接收返回的结果。RPC 关注的是**调用的过程**，而不是资源的传递。
	②trpc具体实现步骤：
		1.定义路由
		2. 生产客户端
		3. 前端向后端的API路由发送请求，服务器根据请求的路由名称调用相应的函数
		4. 将结果返回给前端

